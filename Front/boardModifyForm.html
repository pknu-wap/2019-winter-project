<!DOCTYPE html>
<html lang ="ko">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"></meta>
<title>게시판 상세보기</title>
<style type="text/css">
	* {font-size: 12pt;}
	p {width: 930px; text-align: center;}
	table{ width:40%;}
	table tbody tr th {background-color: gray;}
</style>
<script >
	function goUrl(url) {
		location.href=url;
	}
	var req = new XMLHttpRequest();
	var data,i=0;
	req.onreadystatechange = function a(){
	console.log(this.readyState, this.status);
	if (this.readyState ==4 ){
		console.log(this.response);
		data = JSON.parse(req.response);
		var txt = "";
		txt += "<table border='1'>"
		txt += "<tr><td>"+ "상호명" +"</td>"		
		txt+=("<td>"+"<input type= text id=store value=>" +"</td></tr>");
		txt += "<tr><td>"+ "상품명" +"</td>"
		txt+=("<td>"+"<input type= text id=product value= >" +"</td></tr>");
		txt += "<tr><td>"+ "행사내용" +"</td>"
		txt+=("<td>"+"<input type= text id=content value= >" +"</td></tr>");
		txt += "<tr><td>"+ "가격" +"</td>"
		txt+=("<td>"+"<input type= number id=price value=>"+"원" +"</td></tr>");
		txt += "<tr><td>"+ "시작일시" +"</td>"
		txt+=("<td>"+"<input type= date id=startdate value = >" +"</td></tr>");
		txt += "<tr><td>"+ "종료일시" +"</td>"
		txt+=("<td>"+"<input type= date id=enddate value = >" +"</td></tr>");
		txt += "<tr><td>"+ "비밀번호" +"</td>"
		txt+=("<td>"+"<input type= password id=password>" +"</td></tr>");
		document.getElementById("f").innerHTML = txt;
		txt += "</table>";
		document.getElementById("store").value = data[i].store;
		document.getElementById("product").value = data[i].product;
		document.getElementById("content").value = data[i].content;
		document.getElementById("price").value = data[i].price;
		document.getElementById("startdate").value = data[i].startdate;
		document.getElementById("enddate").value = data[i].enddate;}
	}
	function check() {
		if (document.getElementById("store").value == "" || document.getElementById("store").value == null) {
		alert("상호을 입력하세요.");
		document.getElementById("store").focus();
	               return;}
		else if (document.getElementById("product").value == "" || document.getElementById("product").value == null) {
		alert("상품을 입력하세요.");
		document.getElementById("product").focus();
		return;}
		else if (document.getElementById("price").value == "" || document.getElementById("price").value == null) {
		alert("가격을 입력하세요.");
		document.getElementById("price").focus();
		return;}
		else if (document.getElementById("content").value == "" || document.getElementById("content").value == null) {
		alert("할인내용을 입력하세요.");
		document.getElementById("content").focus();
		return;}
		else if (document.getElementById("enddate").value == "" || document.getElementById("enddate") == null) {
		alert("종료일시을 입력하세요.");
		document.getElementById("enddate").focus();
		return;}
		else if (document.getElementById("password").value == "" ||document.getElementById("password").value == null) {
		alert("비밀번호를 입력하세요.");
		document.getElementById("password").focus();
		return;}
		else {json();}
		}
		function json(){
		var data =  new Object();
		data.store = document.getElementById("store").value;
		data.product = document.getElementById("product").value;
		data.content = document.getElementById("content").value;
		data.price = document.getElementById("price").value;
		data.startdate =document.getElementById("startdate").value;
		data.enddate = document.getElementById("enddate").value;
		data.password = document.getElementById("password").value;
		xhr.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
		xhr.send(JSON.stringify(data));
		xhr.onreadystatechange = function e()
			{
			if(xhr.readyState == 4)
				{
				if(xhr.status==200){console.log(this.responseText);}
				else {console.log('Error!');}
				}
			}
		};
	req.open("GET","./json_data.txt")
	req.send();
</script>
</head>
<body>
	<p id=f></p>
	<p>
		<input type="button" value="목록" onclick="goUrl('boardList.html');" />
		<input type="button" value="수정" onclick="check();" />
		<input type="button" value="삭제" />
	</p>
</body>
</html>